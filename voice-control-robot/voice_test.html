
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voice Input Test</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
    }
    #log {
      margin-top: 1em;
      padding: 1em;
      background: #f2f2f2;
      border-radius: 8px;
      min-height: 100px;
    }
  </style>
</head>
<body>
  <h1>üé§ Voice Input Test</h1>
  <p>Click the button and speak. We'll log what we hear.</p>
  <button id="start">Start Listening</button>
  <div id="log">Status: Not started.</div>

  <script>
    const logDiv = document.getElementById('log');
    const startButton = document.getElementById('start');

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    if (!SpeechRecognition) {
      logDiv.textContent = '‚ùå SpeechRecognition not supported in this browser.';
    } else {
      const recognition = new SpeechRecognition();
      recognition.lang = 'en-US';
      recognition.continuous = false;
      recognition.interimResults = false;

      recognition.onstart = () => {
        logDiv.textContent = 'üéôÔ∏è Listening... Speak now.';
      };

      recognition.onerror = (event) => {
        logDiv.textContent = `‚ùó Error: ${event.error}`;
        console.error(event);
      };

      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript.trim();
        const confidence = event.results[0][0].confidence;
        logDiv.innerHTML = `<strong>Heard:</strong> ${transcript} <br><strong>Confidence:</strong> ${Math.round(confidence * 100)}%`;
        console.log('Transcript:', transcript);
      };

      recognition.onend = () => {
        logDiv.innerHTML += '<br>‚úÖ Done listening.';
      };

      startButton.addEventListener('click', () => {
        try {
          recognition.start();
        } catch (e) {
          logDiv.textContent = '‚ö†Ô∏è Already started.';
        }
      });
    }
  </script>
</body>
</html>
